[buildout]
extends = buildout-configs/base-devel.cfg

parts +=
    zeoserver
    www1
    www2
    instance

[zeoserver]
recipe = plone.recipe.zeoserver
zeo-address =  ${buildout:zeo-address}
effective-user = ${buildout:effective-user}
file-storage = ${buildout:file-storage}
blob-storage = ${buildout:blob-storage}

[www1]
recipe = plone.recipe.zope2instance
http-address = 8081
effective-user = ${buildout:effective-user}
user = admin:admin
zeo-client = True
zeo-address = ${zeoserver:zeo-address}
zodb-cache-size = 55000
zeo-client-cache-size = 350MB
shared-blob = on
verbose-security = off
zserver-threads = 2
eggs = ${buildout:eggs}
zcml = ${buildout:zcml}
enable-product-installation = off
python-check-interval = 1800
environment-vars =
    PYTHON_EGG_CACHE ${buildout:directory}/var/.python-eggs
    ENABLE_PRINTING_MAILHOST True

[www2]
<= www1
http-address = 8082

[instance]
recipe = plone.recipe.zope2instance
http-address = 8080
effective-user = ${buildout:effective-user}
eggs = ${buildout:eggs}
blob-storage = ${buildout:blob-storage}
file-storage = ${buildout:file-storage}
user = admin:admin
zcml = ${buildout:zcml}
zeo-client = False
zserver-threads = 4
environment-vars =
    PYTHON_EGG_CACHE ${buildout:directory}/var/.python-eggs
    ENABLE_PRINTING_MAILHOST True
verbose-security = on
